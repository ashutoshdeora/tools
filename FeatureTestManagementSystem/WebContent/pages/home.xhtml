<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/templates/template.xhtml"
	xmlns:pe="http://primefaces.org/ui/extensions">
	<ui:define name="metadata">
	</ui:define>
	<ui:define name="content">


		<h:form id="ds_runForm">
			<p:growl id="msgs" showDetail="true" autoUpdate="true" showSummary="false"/>
			<table id="ovr_tbl" style="width: 100%; border-spacing: 0;">
				<tr>
					<td><p:panel id="ds_run_panel"
							header="Select a Data Set for Run" style="margin-bottom:10px;">

							<table id="pnl_tbl" style="width: 100%; border-spacing: 0;">
								<tr style="vertical-align: top">
									<td width="25%">
										<table id="row_tbl" style="border-spacing: 0;">
											<tr>
												<td><p:outputLabel for="dataSet_dropD"
														value="Data Set " /></td>
												<td><p:selectOneMenu id="dataSet_dropD"
														autoWidth="false"
														value="#{dataSetRunManageBean.selectedDataSet}"
														style="width:150px;">
														<p:ajax listener="#{dataSetRunManageBean.onDataSetChange}"
															update="acc_tbl,fea_tabl" />
														<f:selectItem itemLabel="Select Data Set" itemValue=""
															noSelectionOption="true" />
														<f:selectItems
															value="#{dataSetRunManageBean.datasetmastersList}"
															var="dsItems" itemValue="#{dsItems.datasetid}"
															itemLabel="#{dsItems.datasetname}" />
													</p:selectOneMenu></td>
											</tr>
											<tr>

												<td colspan="2"><p:dataTable id="acc_tbl"
														scrollHeight="100" scrollable="true"
														value="#{dataSetRunManageBean.accountmastersList}"
														var="accn">
														<p:column headerText="Account Name">
															<h:outputText value="#{accn.accountname}" />
														</p:column>
													</p:dataTable></td>
											</tr>
										</table>
									</td>
									<td>
										<table style="border-spacing: 0;">
											<tr>
												<td></td>
											</tr>
											<tr>
												<td><p:dataTable id="fea_tabl" scrollHeight="150"
														scrollable="true"
														value="#{dataSetRunManageBean.featureRunModelBeansList}"
														var="fea">
														<p:column headerText="Feature Set ID">
															<h:outputText value="#{fea.featureSetId}" />
														</p:column>
														<p:column headerText="Feature Test Phase">
															<h:outputText value="#{fea.featureTestPhase}" />
														</p:column>
														<p:column headerText="Execution Phase">
															<h:outputText value="#{fea.featureRunPhase}" />
														</p:column>
														<p:column headerText="Status">
															<h:outputText value="#{fea.featureRunResult}" />
														</p:column>
														<p:column headerText="Defects">
															<p:dataTable value="#{fea.defectBeansList}" var="defL">
																<p:column>
																	<h:outputText value="#{defL.HPQCID}" />
																</p:column>

															</p:dataTable>
														</p:column>
														<p:column>
															<p:commandButton id="addef_btn" value="Add Defect"
																update="ds_runForm:feaDef_pnlg"
																actionListener="#{dataSetRunManageBean.addFeatureDefects}"
																type="submit">
																<f:attribute name="feature" value="#{fea}" />
															</p:commandButton>
														</p:column>


													</p:dataTable></td>
											</tr>
										</table>

									</td>
									<td width="30%">
										<table>
											<tr>
												<td><h:outputLabel value="Comments for Run"
														for="commentsText" /></td>
												<td><p:inputTextarea id="commentsText"
														value="#{dataSetRunManageBean.testScriptComments}"
														rows="5" cols="30" /></td>
											</tr>
											<tr>
												<td><h:outputLabel value="Select Data Phase"
														for="dataSetPh_dropD" /></td>
												<td><p:selectOneMenu id="dataSetPh_dropD"
														autoWidth="false"
														value="#{dataSetRunManageBean.selectedDataSetphase}"
														style="width:150px;">

														<f:selectItem itemLabel="Select Data Set" itemValue=""
															noSelectionOption="true" />
														<f:selectItems
															value="#{dataSetRunManageBean.datasetPhaseDropDown}"
															var="dsItems" itemValue="#{dsItems.catdata}"
															itemLabel="#{dsItems.catdata}" />
													</p:selectOneMenu></td>
											</tr>
										</table>
									</td>

								</tr>
								<tr>
									<td colspan="3"><p:commandButton
											value="Submit Data Set Run"
											actionListener="#{dataSetRunManageBean.saveDataSetRun}"></p:commandButton>
									</td>
								</tr>
							</table>
						</p:panel></td>
				</tr>
				<tr>
					<td><h:panelGroup id="feaDef_pnlg">
							<p:panel
								rendered="#{dataSetRunManageBean.showfeatureDefectPanel}"
								header="Feature ID: #{dataSetRunManageBean.selectedFeatureID}">
								<table>
									<tr style="vertical-align: top">

										<td><p:outputLabel for="fet_ph_run"
												value="Feature run Phase :" /></td>
										<td><p:selectOneMenu id="fet_ph_run" autoWidth="false"
												value="#{dataSetRunManageBean.selectedFeaturePhase}"
												style="width:100px">
												<f:selectItem itemLabel="Select Feature Phase" itemValue=""
													noSelectionOption="true" />
												<f:selectItems
													value="#{dataSetRunManageBean.featurePhaseDropDown}"
													var="fpItems" itemValue="#{fpItems.catdata}"
													itemLabel="#{fpItems.catdata}" />
											</p:selectOneMenu></td>

										<td><h:outputLabel value="Run Status" for="testRes_dropD" /></td>
										<td><p:selectOneMenu id="testRes_dropD" autoWidth="false"
												value="#{dataSetRunManageBean.selectedTestPhase}"
												style="width:100px">

												<f:selectItem itemLabel="Select Result" itemValue=""
													noSelectionOption="true" />
												<f:selectItems
													value="#{dataSetRunManageBean.testPhaseDropDown}"
													var="lsItems" itemValue="#{lsItems.catdata}"
													itemLabel="#{lsItems.catdata}" />
											</p:selectOneMenu></td>

										<td><h:outputLabel value="Run Status" for="feaRes_dropD" /></td>
										<td><p:selectOneMenu id="feaRes_dropD" autoWidth="false"
												value="#{dataSetRunManageBean.selectedFeatureResult}"
												style="width:100px">
												<p:ajax listener="#{dataSetRunManageBean.onResultChange}"
													event="change" update="def_grp" />
												<f:selectItem itemLabel="Select Result" itemValue=""
													noSelectionOption="true" />
												<f:selectItems
													value="#{dataSetRunManageBean.featureStatusDropDown}"
													var="lsItems" itemValue="#{lsItems.catdata}"
													itemLabel="#{lsItems.catdata}" />
											</p:selectOneMenu></td>
										<td><h:panelGroup id="def_grp">
												<p:commandButton value="Add Defects"
													action="#{dataSetRunManageBean.addMoreDefects}"
													update="new-def_grp new_table"
													disabled="#{!(dataSetRunManageBean.showDefectGroup)}"
													type="submit" />
											</h:panelGroup></td>
										<td><h:panelGroup id="new-def_grp">
												<h:dataTable id="new_table" var="def"
													value="#{dataSetRunManageBean.defectaddingList}">
													<h:column>
														<h:outputLabel value="Defect ID: " />
														<h:inputText value="#{def.HPQCID}" />
													</h:column>
												</h:dataTable>

											</h:panelGroup></td>
									</tr>
									<tr>
										<td colspan="3"><p:commandButton
												value="Save Feature Data"
												actionListener="#{dataSetRunManageBean.saveFeatureData}"
												type="submit" update="fea_tabl,feaDef_pnlg"></p:commandButton></td>
									</tr>
								</table>
							</p:panel>
						</h:panelGroup></td>
				</tr>
				<tr>
					<td><h:panelGroup>
							<p:dataTable value="#{dataSetRunManageBean.datasetRunsList}"
								var="dsr">
								<p:subTable value="#{dsr.featureruns}" var="fsr">
									<p:column>
										<h:outputText value="#{fsr.featuremaster.featureid}" />
									</p:column>
								</p:subTable>
							</p:dataTable>
						</h:panelGroup></td>
				</tr>
			</table>
		</h:form>

	</ui:define>
</ui:composition>